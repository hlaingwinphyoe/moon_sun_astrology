import{T as D}from"./@inertiajs-NuU9yPsb.js";import{_ as I}from"./InputError-D_RmDawB.js";import{_ as w}from"./PermissionsList.vue_vue_type_script_setup_true_lang-ufVBBaqf.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as h}from"./element-plus-CGHro3gb.js";import{e as O,r as T,a1 as x,ak as n,R as C,S as a,o as g,a as y,Y as l,W as V,M as A,c as N,ab as R,F as B}from"./@vue-CiBlh0uF.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bgg5YRNC.js";import"./side-channel-CbjMffun.js";import"./object-inspect-8Tg_cmh0.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-D_65hJm2.js";import"./@element-plus-BF6V2acP.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DnZiAhhr.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const L={props:["show","title","data","permissions"],components:{InputError:I,PermissionsList:w},emits:["closed"],setup(c,r){const i=O({dialogTitle:"",checkAll:!1,isIndeterminate:!0}),e=T(),o=D({name:"",permis:[]}),k=s=>{s.validate(d=>{d&&(i.dialogTitle==="Create"?o.post(route("admin.roles.store"),{onSuccess:t=>{p(s),h.success(t.props.flash.success)}}):o.patch(route("admin.roles.update",c.data.id),{onSuccess:t=>{p(s),h.success(t.props.flash.success)}}))})},p=s=>{o.reset(),o.clearErrors(),s.resetFields(),r.emit("closed")},f=()=>{i.dialogTitle=c.title,o.name=c.data.name??"",o.permis=c.data.permissionIds?c.data.permissionIds:[]},u=([s,d])=>{d==!0?o.permis.push(...s):o.permis=o.permis.filter(t=>!s.includes(t))},_=([s,d])=>{d==!0?o.permis.includes(s)||o.permis.push(s):o.permis.includes(s)&&(console.log(s),o.permis=o.permis.filter(t=>t!=s))};return{...x(i),openDialog:f,formRef:e,closeDialog:p,submitDialog:k,form:o,checkedAll:u,checked:_}}},P={class:"dialog-footer"};function S(c,r,i,e,o,k){const p=n("el-input"),f=n("InputError"),u=n("el-form-item"),_=n("PermissionsList"),s=n("el-scrollbar"),d=n("el-form"),t=n("el-button"),v=n("el-dialog");return g(),C(v,{modelValue:i.show,"onUpdate:modelValue":r[3]||(r[3]=m=>i.show=m),onClose:r[4]||(r[4]=m=>e.closeDialog(e.formRef)),onOpen:e.openDialog,draggable:"",title:c.dialogTitle,"close-on-click-modal":!1,width:"800"},{footer:a(()=>[y("div",P,[l(t,{onClick:r[1]||(r[1]=m=>e.closeDialog(e.formRef))},{default:a(()=>[V("Cancel")]),_:1}),l(t,{type:"primary",onClick:r[2]||(r[2]=m=>e.submitDialog(e.formRef)),class:A({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:a(()=>[V(" Save ")]),_:1},8,["class","disabled"])])]),default:a(()=>[l(d,{"label-width":"120px",ref:"formRef",model:e.form,"label-position":"top"},{default:a(()=>[l(u,{label:"Name",prop:"name",rules:[{required:!0,message:"Name is required",trigger:"blur"}]},{default:a(()=>[l(p,{modelValue:e.form.name,"onUpdate:modelValue":r[0]||(r[0]=m=>e.form.name=m)},null,8,["modelValue"]),l(f,{class:"mt-2",message:e.form.errors.name},null,8,["message"])]),_:1}),l(u,{label:"Permissions"},{default:a(()=>[l(s,{height:"400"},{default:a(()=>[(g(!0),N(B,null,R(i.permissions,(m,b)=>(g(),C(_,{key:b,type:b,permis:m,selected:i.data.permissionIds,role:i.data,onOnCheckedAll:e.checkedAll,onOnChecked:e.checked},null,8,["type","permis","selected","role","onOnCheckedAll","onOnChecked"]))),128)),l(f,{class:"mt-2",message:e.form.errors.permis},null,8,["message"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","onOpen","title"])}const Ce=E(L,[["render",S]]);export{Ce as default};
