import{ak as m,o as b,c as y,a as i,M as u,V as M,Y as s,F as U,e as D,r as I,a1 as A,R as V,S as c,W as k,T as F,Z as E,ab as R}from"./@vue-B1CVMTK9.js";import{_ as T}from"./InputError-Cdm0MI_H.js";import{E as q,a as O,S as B,u as j,U as x}from"./@tiptap-CFodRyYp.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as H}from"./@inertiajs-BgBGItYw.js";import{a as _}from"./element-plus-CWFOddsC.js";import"./prosemirror-state-Dfkm3xtq.js";import"./prosemirror-model-C-VrLeHJ.js";import"./orderedmap-C4TimWWB.js";import"./prosemirror-transform-CNTRfHZy.js";import"./prosemirror-dropcursor-CRVdsyHs.js";import"./prosemirror-gapcursor-qOnImwT-.js";import"./prosemirror-keymap-BrtsOOc5.js";import"./w3c-keyname-DEtA-KhA.js";import"./prosemirror-view-DBf1h0ga.js";import"./prosemirror-history-C8_5KGmB.js";import"./rope-sequence-Cxv9J64N.js";import"./prosemirror-commands-BTjZEoy_.js";import"./prosemirror-schema-list-B_jBki9Q.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bgg5YRNC.js";import"./side-channel-CbjMffun.js";import"./object-inspect-8Tg_cmh0.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-CNLP_BxJ.js";import"./@element-plus-BeIX5OZl.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DnZiAhhr.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const z={props:["modelValue"],components:{Editor:q,EditorContent:O,StarterKit:B},emits:["update:modelValue"],setup(r,{emit:o}){return{editor:j({onUpdate:({editor:t})=>{o("update:modelValue",t.getHTML())},editorProps:{attributes:{class:"editor-body"}},content:r.modelValue,extensions:[B,x]})}}},N={key:0,class:"buttons editor-header"},P=["disabled"],K=["disabled"],W=i("i",null,"I",-1),Y=[W],Z=["disabled"],G=i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 256 256"},[i("path",{fill:"currentColor",d:"M204 224a12 12 0 0 1-12 12H64a12 12 0 0 1 0-24h128a12 12 0 0 1 12 12m-76-28a68.07 68.07 0 0 0 68-68V56a12 12 0 0 0-24 0v72a44 44 0 0 1-88 0V56a12 12 0 0 0-24 0v72a68.07 68.07 0 0 0 68 68"})],-1),J=[G],Q=i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 256 256"},[i("path",{fill:"currentColor",d:"M116 72v88a48.05 48.05 0 0 1-48 48a8 8 0 0 1 0-16a32 32 0 0 0 32-32v-8H40a16 16 0 0 1-16-16V72a16 16 0 0 1 16-16h60a16 16 0 0 1 16 16m100-16h-60a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h60v8a32 32 0 0 1-32 32a8 8 0 0 0 0 16a48.05 48.05 0 0 0 48-48V72a16 16 0 0 0-16-16"})],-1),X=[Q],$=i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 256 256"},[i("path",{fill:"currentColor",d:"M56 128a16 16 0 1 1-16-16a16 16 0 0 1 16 16M40 48a16 16 0 1 0 16 16a16 16 0 0 0-16-16m0 128a16 16 0 1 0 16 16a16 16 0 0 0-16-16m176-64H88a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8m0-64H88a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8V56a8 8 0 0 0-8-8m0 128H88a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8"})],-1),oo=[$],to=i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 256 256"},[i("path",{fill:"currentColor",d:"M224 120v16a8 8 0 0 1-8 8H104a8 8 0 0 1-8-8v-16a8 8 0 0 1 8-8h112a8 8 0 0 1 8 8m-8-72H104a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h112a8 8 0 0 0 8-8V56a8 8 0 0 0-8-8m0 128H104a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h112a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8M43.58 55.16L48 52.94V104a8 8 0 0 0 16 0V40a8 8 0 0 0-11.58-7.16l-16 8a8 8 0 0 0 7.16 14.32m36.19 101.56a23.73 23.73 0 0 0-9.6-15.95a24.86 24.86 0 0 0-34.11 4.7a23.63 23.63 0 0 0-3.57 6.46a8 8 0 1 0 15 5.47a7.84 7.84 0 0 1 1.18-2.13a8.76 8.76 0 0 1 12-1.59a7.91 7.91 0 0 1 3.26 5.32a7.64 7.64 0 0 1-1.57 5.78a1 1 0 0 0-.08.11l-28.69 38.32A8 8 0 0 0 40 216h32a8 8 0 0 0 0-16H56l19.08-25.53a23.47 23.47 0 0 0 4.69-17.75"})],-1),eo=[to],io=i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[i("path",{fill:"currentColor",d:"M4 13v-2h16v2z"})],-1),ro=[io],ao=["disabled"],lo=i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 256 256"},[i("path",{fill:"currentColor",d:"M232 144a64.07 64.07 0 0 1-64 64H80a8 8 0 0 1 0-16h88a48 48 0 0 0 0-96H88v40a8 8 0 0 1-13.66 5.66l-48-48a8 8 0 0 1 0-11.32l48-48A8 8 0 0 1 88 40v40h80a64.07 64.07 0 0 1 64 64"})],-1),so=[lo];function no(r,o,e,t,h,p){const g=m("EditorContent");return b(),y(U,null,[t.editor?(b(),y("div",N,[i("button",{type:"button",onClick:o[0]||(o[0]=l=>t.editor.chain().focus().toggleBold().run()),disabled:!t.editor.can().chain().focus().toggleBold().run(),class:u([{"is-active":t.editor.isActive("bold")},"editor-btn"])}," B ",10,P),i("button",{type:"button",onClick:o[1]||(o[1]=l=>t.editor.chain().focus().toggleItalic().run()),disabled:!t.editor.can().chain().focus().toggleItalic().run(),class:u([{"is-active":t.editor.isActive("italic")},"editor-btn"])},Y,10,K),i("button",{type:"button",onClick:o[2]||(o[2]=l=>t.editor.chain().focus().toggleUnderline().run()),disabled:!t.editor.can().chain().focus().toggleUnderline().run(),class:u([{"is-active":t.editor.isActive("underline")},"editor-btn"])},J,10,Z),i("button",{type:"button",onClick:o[3]||(o[3]=l=>t.editor.chain().focus().toggleHeading({level:1}).run()),class:u([{"is-active":t.editor.isActive("heading",{level:1})},"editor-btn"])}," H1 ",2),i("button",{type:"button",onClick:o[4]||(o[4]=l=>t.editor.chain().focus().toggleHeading({level:2}).run()),class:u([{"is-active":t.editor.isActive("heading",{level:2})},"editor-btn"])}," H2 ",2),i("button",{type:"button",onClick:o[5]||(o[5]=l=>t.editor.chain().focus().toggleBlockquote().run()),class:u([{"is-active":t.editor.isActive("blockquote")},"editor-btn"])},X,2),i("button",{type:"button",onClick:o[6]||(o[6]=l=>t.editor.chain().focus().toggleBulletList().run()),class:u([{"is-active":t.editor.isActive("bulletList")},"editor-btn"])},oo,2),i("button",{type:"button",onClick:o[7]||(o[7]=l=>t.editor.chain().focus().toggleOrderedList().run()),class:u([{"is-active":t.editor.isActive("orderedList")},"editor-btn"])},eo,2),i("button",{type:"button",onClick:o[8]||(o[8]=l=>t.editor.chain().focus().setHorizontalRule().run()),class:"editor-btn cursor-pointer"},ro),i("button",{type:"button",onClick:o[9]||(o[9]=l=>t.editor.chain().focus().undo().run()),disabled:!t.editor.can().chain().focus().undo().run(),class:"editor-btn cursor-pointer"},so,8,ao)])):M("",!0),s(g,{editor:t.editor},null,8,["editor"])],64)}const mo=L(z,[["render",no]]),co={props:["show","title","data","categories"],components:{InputError:T,MyEditor:mo},emits:["closed"],setup(r,o){const e=D({dialogTitle:"",imgSrc:r.data?r.data.poster:"",virtualForm:new FormData,form:{title:"",category:"",desc:""}}),t=I(),h=n=>{n.validate(v=>{v&&(e.virtualForm.append("title",e.form.title),e.virtualForm.append("category",e.form.category),e.virtualForm.append("desc",e.form.desc),e.dialogTitle==="Create"?H.post(route("admin.posts.store"),e.virtualForm,{onSuccess:d=>{_.success(d.props.flash.success),p(n)},onError:()=>{e.isLoading=!1,n.resetFields()}}):(e.virtualForm.append("_method","patch"),H.post(route("admin.posts.update",r.data.id),e.virtualForm,{onSuccess:d=>{_.success(d.props.flash.success),p(n)},onError:d=>{e.isLoading=!1,n.resetFields(),_.error(d.error)}})))})},p=n=>{n.resetFields(),o.emit("closed"),e.form.title="",e.form.category="",e.form.desc="",e.imgSrc="",e.virtualForm=new FormData},g=()=>{e.dialogTitle=r.title,e.form.title=r.data.title??"",e.form.category=r.data.category_id??"",e.imgSrc=r.data.poster??"",e.form.desc=r.data.desc??""},l=()=>{var n=document.getElementById("upload");n.click()},w=n=>{var v=n.target,d=v.files[0];e.imgSrc=URL.createObjectURL(d),e.virtualForm.append("poster",d);var f=document.getElementById("preview_img");f.src=URL.createObjectURL(d),f.onload=function(){URL.revokeObjectURL(f.src)}};return{...A(e),openDialog:g,formRef:t,closeDialog:p,submitDialog:h,selectImage:l,loadFile:w}}},uo=["src"],go={class:"grid grid-cols-2 gap-4"},po=i("p",{class:"mb-1.5"},"Description",-1),vo={class:"dialog-footer mt-4"};function fo(r,o,e,t,h,p){const g=m("InputError"),l=m("el-form-item"),w=m("el-input"),n=m("el-option"),v=m("el-select"),d=m("MyEditor"),f=m("el-form"),C=m("el-button"),S=m("el-dialog");return b(),V(S,{modelValue:e.show,"onUpdate:modelValue":o[7]||(o[7]=a=>e.show=a),onClose:o[8]||(o[8]=a=>t.closeDialog(t.formRef)),onOpen:t.openDialog,draggable:"",title:r.dialogTitle,"close-on-click-modal":!1},{footer:c(()=>[i("div",vo,[s(C,{onClick:o[5]||(o[5]=a=>t.closeDialog(t.formRef))},{default:c(()=>[k("Cancel")]),_:1}),s(C,{type:"primary",onClick:o[6]||(o[6]=a=>t.submitDialog(t.formRef)),class:u({"opacity-25":r.form.processing}),disabled:r.form.processing},{default:c(()=>[k(" Save ")]),_:1},8,["class","disabled"])])]),default:c(()=>[s(f,{"label-width":"120px",ref:"formRef",model:r.form,"label-position":"top"},{default:c(()=>[s(l,{label:"Poster Photo",size:"large"},{default:c(()=>[i("div",{class:"upload-card h-60 w-full object-cover",onClick:o[1]||(o[1]=(...a)=>t.selectImage&&t.selectImage(...a))},[F(i("img",{id:"preview_img",class:"w-full h-auto object-cover",src:r.imgSrc},null,8,uo),[[E,r.imgSrc]]),F(i("h4",null,"Upload Poster (1200 x 630px)",512),[[E,!r.imgSrc]]),i("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:o[0]||(o[0]=(...a)=>t.loadFile&&t.loadFile(...a)),accept:"image/*"},null,32)]),s(g,{class:"mt-2",message:r.$page.props.errors.image},null,8,["message"])]),_:1}),i("div",go,[s(l,{label:"Title",prop:"title",rules:[{required:!0,message:"Title is required",trigger:"blur"}]},{default:c(()=>[s(w,{modelValue:r.form.title,"onUpdate:modelValue":o[2]||(o[2]=a=>r.form.title=a)},null,8,["modelValue"]),s(g,{class:"mt-2",message:r.$page.props.errors.name},null,8,["message"])]),_:1}),s(l,{label:"Category",rules:[{required:!0,message:"Category is required",trigger:"blur"}]},{default:c(()=>[s(v,{modelValue:r.form.category,"onUpdate:modelValue":o[3]||(o[3]=a=>r.form.category=a),placeholder:"Select",filterable:""},{default:c(()=>[(b(!0),y(U,null,R(e.categories,a=>(b(),V(n,{key:a.slug,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(g,{class:"mt-2",message:r.$page.props.errors.category},null,8,["message"])]),_:1})]),i("div",null,[po,s(d,{modelValue:r.form.desc,"onUpdate:modelValue":o[4]||(o[4]=a=>r.form.desc=a)},null,8,["modelValue"]),s(g,{class:"mt-2",message:r.$page.props.errors.desc},null,8,["message"])])]),_:1},8,["model"])]),_:1},8,["modelValue","onOpen","title"])}const ut=L(co,[["render",fo]]);export{ut as default};
