import{A as B}from"./AuthenticatedLayout-BirlbE4Q.js";import{F as _}from"./@inertiajs-BgBGItYw.js";import{d as V}from"./lodash.debounce-BuEyZVTI.js";import A from"./Dialog-B95FkRuy.js";import{B as F,Q as P,R as j,S as M,T as O,P as H}from"./@element-plus-Dpx_4zAy.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as J,a as f}from"./element-plus-B6wquGkZ.js";import{e as W,w as Q,a1 as U,ak as a,ar as X,c as y,Y as t,S as o,F as Y,o as h,a as i,T as q,X as D,W as G,R as K,V as Z}from"./@vue-B1CVMTK9.js";import"./moment-C5S46NFB.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bgg5YRNC.js";import"./side-channel-CbjMffun.js";import"./object-inspect-8Tg_cmh0.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./InputError-Cdm0MI_H.js";import"./PermissionsList.vue_vue_type_script_setup_true_lang-QtB3mCj8.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-CNLP_BxJ.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DnZiAhhr.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const $={props:["roles","permissions"],components:{AuthenticatedLayout:B,Dialog:A,Plus:F,Edit:P,Refresh:j,Filter:M,Checked:O,Delete:H},setup(){const e=W({showDialog:!1,isLoading:!1,dialog:{dialogTitle:"",dialogData:{}},pageList:[10,20,60,80,100],param:{page:1,page_size:10,search:""}}),m=l=>{e.param.page_size=l,c()},d=l=>{e.param.page=l,c()},n=()=>{e.dialog.dialogTitle="Create",e.dialog.dialogData={},e.showDialog=!0},C=l=>{e.dialog.dialogTitle="Edit",e.dialog.dialogData=JSON.parse(JSON.stringify(l)),e.showDialog=!0},b=l=>{J.confirm("Are you sure you want to delete?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",draggable:!0,closeOnClickModal:!1}).then(()=>{_.delete(route("admin.roles.destroy",l),{preserveScroll:!0,preserveState:!0,onSuccess:p=>{f.success(p.props.flash.success)},onError:p=>{f.error(p.error)}})}).catch(()=>{f({type:"info",message:"Cancel"})})};Q(()=>e.param.search,V(()=>{c()},500));const c=()=>{e.isLoading=!0,_.get("/admin/roles",e.param,{preserveScroll:!0,preserveState:!0,replace:!0,onFinish:()=>{e.isLoading=!1}})},g=()=>{e.showDialog=!1},r=()=>{_.get(route("admin.roles.index"))};return{...U(e),addNew:n,handleEdit:C,handleDelete:b,onSizeChange:m,onCurrentChange:d,closeDialog:g,reset:r}}},ee={class:"p-4 container mx-auto overflow-x-auto"},te=i("h4",{class:"text-lg font-bold mb-3 ml-1"},"Roles",-1),oe={class:"bg-white p-4 rounded shadow-sm border border-gray-200"},ae={class:"flex items-center justify-between gap-4 xl:gap-0 mt-2 mb-5"},le={class:"flex items-center gap-3"},ne=i("span",null,"New",-1),se={"element-loading-text":"Loading...","element-loading-background":"rgba(229, 231, 235, 0.7)"},ie={class:"font-semibold"},re={class:"my-5 flex items-center justify-center"};function de(e,m,d,n,C,b){const c=a("Head"),g=a("Plus"),r=a("el-icon"),l=a("el-button"),p=a("el-input"),v=a("Refresh"),u=a("el-table-column"),k=a("el-tag"),x=a("Edit"),w=a("el-tooltip"),S=a("Delete"),z=a("el-table"),E=a("el-pagination"),L=a("Dialog"),N=a("AuthenticatedLayout"),R=X("loading");return h(),y(Y,null,[t(c,{title:"Roles"}),t(N,null,{default:o(()=>[i("div",ee,[te,i("div",oe,[i("div",ae,[i("div",le,[t(l,{type:"primary",onClick:n.addNew},{default:o(()=>[t(r,null,{default:o(()=>[t(g)]),_:1}),ne]),_:1},8,["onClick"])]),i("div",null,[t(p,{modelValue:e.param.search,"onUpdate:modelValue":m[0]||(m[0]=s=>e.param.search=s),style:{width:"200px"},placeholder:"Search Roles"},null,8,["modelValue"]),t(l,{type:"danger",onClick:n.reset,class:"ml-3"},{default:o(()=>[t(r,null,{default:o(()=>[t(v)]),_:1})]),_:1},8,["onClick"])])]),q((h(),y("div",se,[t(z,{data:d.roles.data,"table-layout":"auto","default-sort":{prop:"id",order:"descending"}},{default:o(()=>[t(u,{prop:"id",label:"ID",sortable:""}),t(u,{label:"Name",sortable:""},{default:o(s=>[i("h5",ie,D(s.row.name),1)]),_:1}),t(u,{label:"Permissions"},{default:o(s=>[t(k,{size:"small"},{default:o(()=>[G(D(s.row.permissions),1)]),_:2},1024)]),_:1}),t(u,{label:"Actions"},{default:o(s=>[t(w,{class:"box-item",content:"Edit",placement:"top"},{default:o(()=>[t(l,{type:"warning",circle:"",style:{"margin-bottom":"5px"},onClick:T=>n.handleEdit(s.row)},{default:o(()=>[t(r,null,{default:o(()=>[t(x)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),t(w,{class:"box-item",content:"Delete",placement:"top"},{default:o(()=>[s.row.users.length?Z("",!0):(h(),K(l,{key:0,type:"danger",circle:"",style:{"margin-bottom":"5px"},onClick:T=>n.handleDelete(s.row.id)},{default:o(()=>[t(r,null,{default:o(()=>[t(S)]),_:1})]),_:2},1032,["onClick"]))]),_:2},1024)]),_:1})]),_:1},8,["data"]),i("div",re,[t(E,{onSizeChange:n.onSizeChange,onCurrentChange:n.onCurrentChange,"page-size":e.param.page_size,background:!0,"page-sizes":e.pageList,"current-page":e.param.page,layout:"total,sizes,prev,pager,next,jumper",total:d.roles.total},null,8,["onSizeChange","onCurrentChange","page-size","page-sizes","current-page","total"])])])),[[R,e.isLoading]])])]),t(L,{show:e.showDialog,onClosed:n.closeDialog,title:e.dialog.dialogTitle,data:e.dialog.dialogData,permissions:d.permissions},null,8,["show","onClosed","title","data","permissions"])]),_:1})],64)}const Ge=I($,[["render",de]]);export{Ge as default};
