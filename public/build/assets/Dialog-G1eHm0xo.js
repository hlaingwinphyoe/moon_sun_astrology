import{e as h,r as C,a1 as U,ak as m,R as V,S as n,o as b,a as p,Y as a,W as k,M as E,c as I,ab as R,F as B,T as P,Z as T}from"./@vue-B1CVMTK9.js";import{_ as j}from"./InputError-Cdm0MI_H.js";import{B as N,P as O}from"./@element-plus-Dpx_4zAy.js";import{F as y}from"./@inertiajs-BgBGItYw.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as v}from"./element-plus-B6wquGkZ.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bgg5YRNC.js";import"./side-channel-CbjMffun.js";import"./object-inspect-8Tg_cmh0.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-CNLP_BxJ.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DnZiAhhr.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const z={props:["show","title","data","currencies"],components:{InputError:j,Plus:N,Delete:O},emits:["closed"],setup(o,r){const e=h({dialogTitle:"",isLoading:!1,virtualForm:new FormData,imgSrc:"",form:{name:"",price:"",currency:""}}),i=C(),F=l=>{e.isLoading=!0,l.validate(u=>{u&&(e.virtualForm.append("name",e.form.name),e.virtualForm.append("price",e.form.price),e.virtualForm.append("currency",e.form.currency),e.dialogTitle==="Create"?y.post(route("admin.items.store"),e.virtualForm,{onSuccess:s=>{e.isLoading=!1,v.success(s.props.flash.success),l.resetFields(),d(l)},onError:()=>{e.isLoading=!1,l.resetFields(),v.error(page.error)}}):(e.virtualForm.append("_method","patch"),y.post(route("admin.items.update",o.data.id),e.virtualForm,{onSuccess:s=>{e.isLoading=!1,v.success(s.props.flash.success),l.resetFields(),d(l)},onError:s=>{e.isLoading=!1,l.resetFields(),v.error(s.error)}})))})},w=()=>{var l=document.getElementById("upload");l.click()},f=l=>{var u=l.target,s=u.files[0];e.imgSrc=URL.createObjectURL(s),e.virtualForm.append("image",s);var g=document.getElementById("preview_img");g.src=URL.createObjectURL(s),g.onload=function(){URL.revokeObjectURL(g.src)}},d=l=>{l.resetFields(),r.emit("closed")},c=l=>{y.delete(route("admin.items.destroy-media",l.id),{onSuccess:()=>{e.imgSrc=""}})},_=()=>{e.dialogTitle=o.title,e.form.name=o.data.name??"",e.form.price=o.data.price??"",e.form.currency=o.data.currency_id??o.currencies[0].id,e.imgSrc=o.data.image??""};return{...U(e),openDialog:_,formRef:i,closeDialog:d,submitDialog:F,selectImage:w,loadFile:f,handleRemove:c}}},M={class:"relative group"},W=["src"],Y={class:"dialog-footer"};function Z(o,r,e,i,F,w){const f=m("el-input"),d=m("InputError"),c=m("el-form-item"),_=m("el-option"),l=m("el-select"),u=m("Delete"),s=m("el-icon"),g=m("Plus"),D=m("el-form"),L=m("el-button"),S=m("el-dialog");return b(),V(S,{modelValue:e.show,"onUpdate:modelValue":r[8]||(r[8]=t=>e.show=t),onClose:r[9]||(r[9]=t=>i.closeDialog(i.formRef)),onOpen:i.openDialog,draggable:"",title:o.dialogTitle,"close-on-click-modal":!1,width:"550"},{footer:n(()=>[p("div",Y,[a(L,{onClick:r[6]||(r[6]=t=>i.closeDialog(i.formRef))},{default:n(()=>[k("Cancel")]),_:1}),a(L,{type:"primary",onClick:r[7]||(r[7]=t=>i.submitDialog(i.formRef)),class:E({"opacity-25":o.isLoading}),disabled:o.isLoading},{default:n(()=>[k(" Save ")]),_:1},8,["class","disabled"])])]),default:n(()=>[a(D,{"label-width":"120px",ref:"formRef",model:o.form},{default:n(()=>[a(c,{label:"Name",prop:"name",rules:[{required:!0,message:"Name is required",trigger:"blur"}]},{default:n(()=>[a(f,{modelValue:o.form.name,"onUpdate:modelValue":r[0]||(r[0]=t=>o.form.name=t)},null,8,["modelValue"]),a(d,{class:"mt-2",message:o.$page.props.errors.name},null,8,["message"])]),_:1}),a(c,{label:"Price",prop:"price",rules:[{required:!0,message:"Price is required",trigger:"blur"}]},{default:n(()=>[a(f,{modelValue:o.form.price,"onUpdate:modelValue":r[2]||(r[2]=t=>o.form.price=t),type:"number",min:0,style:{"max-width":"600px"},placeholder:"Please input",class:"input-with-select"},{append:n(()=>[a(l,{modelValue:o.form.currency,"onUpdate:modelValue":r[1]||(r[1]=t=>o.form.currency=t),placeholder:"Select",style:{width:"115px"}},{default:n(()=>[(b(!0),I(B,null,R(e.currencies,t=>(b(),V(_,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),a(d,{class:"mt-2",message:o.$page.props.errors.price},null,8,["message"]),a(d,{class:"mt-2",message:o.$page.props.errors.currency},null,8,["message"])]),_:1}),a(c,{label:"Image"},{default:n(()=>[p("div",M,[P(p("img",{id:"preview_img",class:"upload-card object-contain mr-2.5",src:o.imgSrc},null,8,W),[[T,o.imgSrc!=""]]),p("span",{class:"absolute-center hidden group-hover:flex group-hover:bg-black group-hover:bg-opacity-50 w-[148px] h-[148px] text-white items-center justify-center rounded-md",onClick:r[3]||(r[3]=t=>i.handleRemove(e.data))},[a(s,{size:"large",class:"cursor-pointer"},{default:n(()=>[a(u)]),_:1})])]),p("div",{class:"upload-card",onClick:r[5]||(r[5]=(...t)=>i.selectImage&&i.selectImage(...t))},[p("h4",null,[a(s,{size:"large"},{default:n(()=>[a(g)]),_:1})]),p("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:r[4]||(r[4]=(...t)=>i.loadFile&&i.loadFile(...t)),accept:"image/*"},null,32)]),a(d,{class:"mt-2",message:o.$page.props.errors.image},null,8,["message"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","onOpen","title"])}const Se=q(z,[["render",Z]]);export{Se as default};
