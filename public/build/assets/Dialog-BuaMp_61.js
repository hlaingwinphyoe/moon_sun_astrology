import{e as h,r as C,a1 as U,ak as m,R as L,S as s,o as _,a as u,Y as r,W as S,M as y,c as E,ab as I,F as B,T as P,Z as T}from"./@vue-CiBlh0uF.js";import{_ as j}from"./InputError-D_RmDawB.js";import{B as N,P as O}from"./@element-plus-BF6V2acP.js";import{F as V}from"./@inertiajs-NuU9yPsb.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as v}from"./element-plus-CGHro3gb.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bgg5YRNC.js";import"./side-channel-CbjMffun.js";import"./object-inspect-8Tg_cmh0.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-D_65hJm2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DnZiAhhr.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const z={props:["show","title","data","roles"],components:{InputError:j,Plus:N,Delete:O},emits:["closed"],setup(o,l){const e=h({dialogTitle:"",imgSrc:"",virtualForm:new FormData,form:{name:"",role:"",phone:"",email:"",social_link:""}}),t=C(),F=i=>{e.isLoading=!0,i.validate(g=>{g&&(e.virtualForm.append("name",e.form.name),e.virtualForm.append("role",e.form.role),e.virtualForm.append("phone",e.form.phone),e.virtualForm.append("email",e.form.email),e.virtualForm.append("social_link",e.form.social_link),e.dialogTitle==="Create"?V.post(route("admin.staffs.store"),e.virtualForm,{onSuccess:d=>{v.success(d.props.flash.success),n(i)},onError:()=>{e.isLoading=!1,v.error(page.error)}}):(e.virtualForm.append("_method","patch"),V.post(route("admin.staffs.update",o.data.id),e.virtualForm,{onSuccess:d=>{n(i),v.success(d.props.flash.success)},onError:()=>{e.isLoading=!1,v.error(page.error)}})))})},k=()=>{var i=document.getElementById("upload");i.click()},f=i=>{var g=i.target,d=g.files[0];e.imgSrc=URL.createObjectURL(d),e.virtualForm.append("image",d);var c=document.getElementById("preview_img");c.src=URL.createObjectURL(d),c.onload=function(){URL.revokeObjectURL(c.src)}},n=i=>{e.isLoading=!1,i.resetFields(),l.emit("closed")},p=()=>{e.dialogTitle=o.title,e.form.name=o.data.name??"",e.form.role=o.data.role_id??"",e.form.phone=o.data.phone??"",e.form.email=o.data.email??"",e.imgSrc=o.data.profile??""},b=i=>{V.delete(route("admin.staffs.destroy-media",i.id),{onSuccess:()=>{e.imgSrc=""}})};return{...U(e),openDialog:p,formRef:t,closeDialog:n,submitDialog:F,selectImage:k,loadFile:f,handleRemove:b}}},M={class:"relative group"},W=["src"],Y={class:"dialog-footer"};function Z(o,l,e,t,F,k){const f=m("el-input"),n=m("InputError"),p=m("el-form-item"),b=m("el-option"),i=m("el-select"),g=m("Delete"),d=m("el-icon"),c=m("Plus"),w=m("el-form"),R=m("el-button"),D=m("el-dialog");return _(),L(D,{modelValue:e.show,"onUpdate:modelValue":l[11]||(l[11]=a=>e.show=a),onClose:l[12]||(l[12]=a=>t.closeDialog(t.formRef)),onOpen:t.openDialog,draggable:"",title:o.dialogTitle,"close-on-click-modal":!1,width:"550"},{footer:s(()=>[u("div",Y,[r(R,{onClick:l[9]||(l[9]=a=>t.closeDialog(t.formRef))},{default:s(()=>[S("Cancel")]),_:1}),r(R,{type:"primary",onClick:l[10]||(l[10]=a=>t.submitDialog(t.formRef)),class:y({"opacity-25":o.isLoading}),disabled:o.isLoading},{default:s(()=>[S(" Save ")]),_:1},8,["class","disabled"])])]),default:s(()=>[r(w,{"label-width":"120px",ref:"formRef",model:o.form},{default:s(()=>[r(p,{label:"Name",prop:"name",rules:[{required:!0,message:"Name is required",trigger:"blur"}]},{default:s(()=>[r(f,{modelValue:o.form.name,"onUpdate:modelValue":l[0]||(l[0]=a=>o.form.name=a)},null,8,["modelValue"]),r(n,{class:"mt-2",message:o.$page.props.errors.name},null,8,["message"])]),_:1}),r(p,{label:"Role",rules:[{required:!0,message:"Role is required",trigger:"blur"}]},{default:s(()=>[r(i,{modelValue:o.form.role,"onUpdate:modelValue":l[1]||(l[1]=a=>o.form.role=a),placeholder:"Select",clearable:"",onClear:l[2]||(l[2]=a=>o.form.role="")},{default:s(()=>[(_(!0),E(B,null,I(e.roles,a=>(_(),L(b,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(n,{class:"mt-2",message:o.$page.props.errors.role},null,8,["message"])]),_:1}),r(p,{label:"Email",prop:"email"},{default:s(()=>[r(f,{type:"email",modelValue:o.form.email,"onUpdate:modelValue":l[3]||(l[3]=a=>o.form.email=a)},null,8,["modelValue"]),r(n,{class:"mt-2",message:o.$page.props.errors.email},null,8,["message"])]),_:1}),r(p,{label:"Phone",prop:"phone"},{default:s(()=>[r(f,{modelValue:o.form.phone,"onUpdate:modelValue":l[4]||(l[4]=a=>o.form.phone=a)},null,8,["modelValue"]),r(n,{class:"mt-2",message:o.$page.props.errors.phone},null,8,["message"])]),_:1}),r(p,{label:"Social Link",prop:"social"},{default:s(()=>[r(f,{modelValue:o.form.social,"onUpdate:modelValue":l[5]||(l[5]=a=>o.form.social=a)},null,8,["modelValue"]),r(n,{class:"mt-2",message:o.$page.props.errors.social},null,8,["message"])]),_:1}),r(p,{label:"Profile"},{default:s(()=>[u("div",M,[P(u("img",{id:"preview_img",class:"upload-card object-contain mr-2.5",src:o.imgSrc},null,8,W),[[T,o.imgSrc!=""]]),u("span",{class:"absolute-center hidden group-hover:flex group-hover:bg-black group-hover:bg-opacity-50 w-[148px] h-[148px] text-white items-center justify-center rounded-md",onClick:l[6]||(l[6]=a=>t.handleRemove(e.data))},[r(d,{size:"large",class:"cursor-pointer"},{default:s(()=>[r(g)]),_:1})])]),u("div",{class:"upload-card",onClick:l[8]||(l[8]=(...a)=>t.selectImage&&t.selectImage(...a))},[u("h4",null,[r(d,{size:"large"},{default:s(()=>[r(c)]),_:1})]),u("input",{type:"file",class:"hidden",name:"image",id:"upload",onChange:l[7]||(l[7]=(...a)=>t.loadFile&&t.loadFile(...a)),accept:"image/*"},null,32)]),r(n,{class:"mt-2",message:o.$page.props.errors.image},null,8,["message"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","onOpen","title"])}const De=q(z,[["render",Z]]);export{De as default};
