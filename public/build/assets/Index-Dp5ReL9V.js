import{A as B}from"./AuthenticatedLayout-TSwoo5LD.js";import{T as k,F as S}from"./@inertiajs-BgBGItYw.js";import{e as F,r as R,a1 as L,ak as a,c as V,Y as s,S as n,F as C,n as P,o as f,a as i,M as E,W as w,ab as U,ac as A,R as I,X as N}from"./@vue-B1CVMTK9.js";import{_ as T}from"./InputError-Cdm0MI_H.js";import{B as D}from"./@element-plus-BeIX5OZl.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as _,E as O}from"./element-plus-CWFOddsC.js";import"./moment-C5S46NFB.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bgg5YRNC.js";import"./side-channel-CbjMffun.js";import"./object-inspect-8Tg_cmh0.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-CNLP_BxJ.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DnZiAhhr.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const j={props:["system_info"],components:{AuthenticatedLayout:B,InputError:T,Plus:D},setup(l){const t=F({inputVisible:!1,imgSrc:"",virtualForm:new FormData}),g=R(),e=k({name:l.system_info.name,email:l.system_info.email,address:l.system_info.address}),p=k({phone:""}),x=()=>{e.patch(route("admin.system-infos.update",{onSuccess:r=>{e.clearErrors(),_.success(r.props.flash.success)}}))},b=()=>{p.patch(route("admin.system-infos.addPhone",l.system_info.id),{onSuccess:r=>{u(),_.success(r.props.flash.success)}})},c=r=>{O.confirm("Are you sure want to delete?","Confirmation",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",draggable:!0,closeOnClickModal:!1}).then(()=>{S.delete(route("admin.system-infos.deletePhone",{info:l.system_info.id,phone:r}),{},{preserveState:!0,onSuccess:m=>{_.success(m.props.flash.success)},onError:m=>{_.error(m.props.flash.error)}})}).catch(()=>{S.reload(),_({type:"info",message:"Cancel"})})},d=()=>{t.inputVisible=!0,P(()=>{g.value.focus()})},u=()=>{e.reset(),e.clearErrors(),p.reset(),p.clearErrors(),t.inputVisible=!1},h=()=>{var r=document.getElementById("upload");r.click()},v=r=>{var m=r.target,o=m.files[0];t.imgSrc=URL.createObjectURL(o),t.virtualForm.append("image",o);var y=document.getElementById("preview_img");y.src=URL.createObjectURL(o),y.onload=function(){URL.revokeObjectURL(y.src)}};return{...L(t),InputRef:g,showInput:d,form:e,phoneForm:p,systemInfoSubmit:x,systemPhoneSubmit:b,handlePhoneDelete:c,selectImage:h,loadFile:v}}},K={class:"p-4 container mx-auto overflow-x-auto"},q=i("h4",{class:"text-lg font-bold mb-3 ml-1"},"System Information",-1),z={class:"grid lg:grid-cols-2 gap-4"},H={class:"bg-white p-4 rounded shadow-sm border border-gray-200"},W={class:"bg-white p-4 rounded shadow-sm border border-gray-200"},X=i("h4",{class:"mb-4"},"Phone",-1),Y={class:"flex flex-wrap gap-2"},Z={key:0};function G(l,t,g,e,p,x){const b=a("Head"),c=a("el-input"),d=a("InputError"),u=a("el-form-item"),h=a("el-button"),v=a("el-form"),r=a("el-tag"),m=a("AuthenticatedLayout");return f(),V(C,null,[s(b,{title:"Zodiacs"}),s(m,null,{default:n(()=>[i("div",K,[q,i("div",z,[i("div",H,[s(v,{"label-width":"120px",ref:"formRef",model:e.form,"label-position":"top"},{default:n(()=>[s(u,{label:"Name",prop:"name",rules:[{required:!0,message:"Name is required",trigger:"blur"}]},{default:n(()=>[s(c,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.name=o)},null,8,["modelValue"]),s(d,{class:"mt-2",message:e.form.errors.name},null,8,["message"])]),_:1}),s(u,{label:"Email",prop:"email"},{default:n(()=>[s(c,{modelValue:e.form.email,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.email=o),type:"email"},null,8,["modelValue"]),s(d,{class:"mt-2",message:e.form.errors.email},null,8,["message"])]),_:1}),s(u,{label:"Address",prop:"address"},{default:n(()=>[s(c,{modelValue:e.form.address,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.address=o),type:"textarea"},null,8,["modelValue"]),s(d,{class:"mt-2",message:e.form.errors.address},null,8,["message"])]),_:1}),s(h,{type:"primary",onClick:e.systemInfoSubmit,class:E({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:n(()=>[w("Save")]),_:1},8,["onClick","class","disabled"])]),_:1},8,["model"])]),i("div",W,[X,i("div",Y,[(f(!0),V(C,null,U(g.system_info.phones,o=>(f(),I(r,{key:o,closable:"","disable-transitions":!1,size:"large",onClose:y=>e.handlePhoneDelete(o.id)},{default:n(()=>[w(N(o.phone),1)]),_:2},1032,["onClose"]))),128)),l.inputVisible?(f(),V("div",Z,[s(c,{ref:"InputRef",modelValue:e.phoneForm.phone,"onUpdate:modelValue":t[3]||(t[3]=o=>e.phoneForm.phone=o),style:{width:"10rem"},onKeyup:A(e.systemPhoneSubmit,["enter"]),onBlur:e.systemPhoneSubmit},null,8,["modelValue","onKeyup","onBlur"]),s(d,{class:"mt-2",message:e.phoneForm.errors.phone},null,8,["message"])])):(f(),I(h,{key:1,onClick:e.showInput,class:E({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:n(()=>[w(" + New Phone ")]),_:1},8,["onClick","class","disabled"]))])])])])]),_:1})],64)}const Ue=M(j,[["render",G]]);export{Ue as default};
