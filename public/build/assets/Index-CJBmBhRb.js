import{A as P}from"./AuthenticatedLayout-TSwoo5LD.js";import{F as _}from"./@inertiajs-BgBGItYw.js";import{d as F}from"./lodash.debounce-BuEyZVTI.js";import R from"./Dialog-CKVBff4x.js";import{B as j,Q as M,R as O,S as U,P as H}from"./@element-plus-BeIX5OZl.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as x,a as m}from"./element-plus-CWFOddsC.js";import{e as W,w as I,a1 as Q,ak as l,ar as X,c as b,Y as e,S as o,F as Y,o as w,a as i,T as q,V as G,X as S,W as K}from"./@vue-B1CVMTK9.js";import"./moment-C5S46NFB.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bgg5YRNC.js";import"./side-channel-CbjMffun.js";import"./object-inspect-8Tg_cmh0.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./InputError-Cdm0MI_H.js";import"./@tiptap-CFodRyYp.js";import"./prosemirror-state-Dfkm3xtq.js";import"./prosemirror-model-C-VrLeHJ.js";import"./orderedmap-C4TimWWB.js";import"./prosemirror-transform-CNTRfHZy.js";import"./prosemirror-dropcursor-CRVdsyHs.js";import"./prosemirror-gapcursor-qOnImwT-.js";import"./prosemirror-keymap-BrtsOOc5.js";import"./w3c-keyname-DEtA-KhA.js";import"./prosemirror-view-DBf1h0ga.js";import"./prosemirror-history-C8_5KGmB.js";import"./rope-sequence-Cxv9J64N.js";import"./prosemirror-commands-BTjZEoy_.js";import"./prosemirror-schema-list-B_jBki9Q.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-CNLP_BxJ.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DnZiAhhr.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const Z={props:["posts","categories"],components:{AuthenticatedLayout:P,Dialog:R,Plus:j,Edit:M,Refresh:O,Filter:U,Delete:H},setup(){const t=W({showDialog:!1,isLoading:!1,dialog:{dialogTitle:"",dialogData:{}},pageList:[10,20,60,80,100],param:{page:1,page_size:10,search:""}}),f=n=>{t.param.page_size=n,g()},u=n=>{t.param.page=n,g()},r=()=>{t.dialog.dialogTitle="Create",t.dialog.dialogData={},t.showDialog=!0},y=n=>{t.dialog.dialogTitle="Edit",t.dialog.dialogData=JSON.parse(JSON.stringify(n)),t.showDialog=!0},v=n=>{x.confirm("Are you sure want to change status of this item?","Confirmation",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",draggable:!0,closeOnClickModal:!1}).then(()=>{_.patch(route("admin.posts.change-status",n.id),{},{preserveState:!0,onSuccess:s=>{m.success(s.props.flash.success)},onError:s=>{m.error(s.props.flash.error)}})}).catch(()=>{_.reload(),m({type:"info",message:"Cancel"})})},C=n=>{x.confirm("Are you sure you want to delete?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",draggable:!0,closeOnClickModal:!1}).then(()=>{_.delete(route("admin.posts.destroy",n),{onSuccess:s=>{m.success(s.props.flash.success)},onError:s=>{m.error(s.props.flash.error)}})}).catch(()=>{m({type:"info",message:"Cancel"})})};I(()=>t.param.search,F(()=>{g()},500));const g=()=>{t.isLoading=!0,_.get("/admin/posts",t.param,{preserveScroll:!0,preserveState:!0,replace:!0,onFinish:()=>{t.isLoading=!1}})},d=()=>{t.showDialog=!1},p=()=>{_.get(route("admin.posts.index"))};return{...Q(t),addNew:r,handleEdit:y,handleDelete:C,onSizeChange:f,onCurrentChange:u,closeDialog:d,reset:p,changeStatus:v}}},$={class:"p-4 container mx-auto overflow-x-auto"},ee=i("h4",{class:"text-lg font-bold mb-3 ml-1"},"Posts",-1),te={class:"bg-white p-4 rounded shadow-sm border border-gray-200"},oe={class:"flex items-center justify-between gap-4 xl:gap-0 mt-2 mb-5"},ae={class:"flex items-center gap-3"},le=i("span",null,"New",-1),ne={"element-loading-text":"Loading...","element-loading-background":"rgba(229, 231, 235, 0.7)"},re=["src","alt"],se={class:"font-semibold"},ie={class:"my-5 flex items-center justify-center"};function ce(t,f,u,r,y,v){const C=l("Head"),g=l("Plus"),d=l("el-icon"),p=l("el-button"),n=l("el-input"),s=l("Refresh"),c=l("el-table-column"),k=l("el-tag"),E=l("el-switch"),z=l("Edit"),D=l("el-tooltip"),V=l("Delete"),T=l("el-table"),A=l("el-pagination"),L=l("Dialog"),B=l("AuthenticatedLayout"),N=X("loading");return w(),b(Y,null,[e(C,{title:"Posts"}),e(B,null,{default:o(()=>[i("div",$,[ee,i("div",te,[i("div",oe,[i("div",ae,[e(p,{type:"primary",onClick:r.addNew},{default:o(()=>[e(d,null,{default:o(()=>[e(g)]),_:1}),le]),_:1},8,["onClick"])]),i("div",null,[e(n,{modelValue:t.param.search,"onUpdate:modelValue":f[0]||(f[0]=a=>t.param.search=a),style:{width:"200px"},placeholder:"Search Posts"},null,8,["modelValue"]),e(p,{type:"danger",onClick:r.reset,class:"ml-3"},{default:o(()=>[e(d,null,{default:o(()=>[e(s)]),_:1})]),_:1},8,["onClick"])])]),q((w(),b("div",ne,[e(T,{data:u.posts.data,"table-layout":"fixed","default-sort":{prop:"id",order:"descending"}},{default:o(()=>[e(c,{label:"Poster"},{default:o(a=>[a.row.poster?(w(),b("img",{key:0,src:a.row.poster,class:"h-8 w-10 object-cover rounded",alt:a.row.title},null,8,re)):G("",!0)]),_:1}),e(c,{label:"Title",sortable:""},{default:o(a=>[i("h5",se,S(a.row.title),1)]),_:1}),e(c,{label:"Category"},{default:o(a=>[e(k,{type:"primary"},{default:o(()=>[K(S(a.row.cate_name),1)]),_:2},1024)]),_:1}),e(c,{prop:"owner",label:"Author"}),e(c,{prop:"created_at",label:"Created At",sortable:"",align:"center"}),e(c,{label:"Available",align:"center"},{default:o(a=>[e(E,{modelValue:a.row.is_published,"onUpdate:modelValue":h=>a.row.is_published=h,"active-value":0,"inactive-value":1,onChange:h=>r.changeStatus(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(c,{label:"Actions"},{default:o(a=>[e(D,{class:"box-item",content:"Edit",placement:"top"},{default:o(()=>[e(p,{type:"warning",circle:"",style:{"margin-bottom":"5px"},onClick:h=>r.handleEdit(a.row)},{default:o(()=>[e(d,null,{default:o(()=>[e(z)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e(D,{class:"box-item",content:"Delete",placement:"top"},{default:o(()=>[e(p,{type:"danger",circle:"",style:{"margin-bottom":"5px"},onClick:h=>r.handleDelete(a.row.id)},{default:o(()=>[e(d,null,{default:o(()=>[e(V)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),i("div",ie,[e(A,{onSizeChange:r.onSizeChange,onCurrentChange:r.onCurrentChange,"page-size":t.param.page_size,background:!0,"page-sizes":t.pageList,"current-page":t.param.page,layout:"total,sizes,prev,pager,next,jumper",total:u.posts.total},null,8,["onSizeChange","onCurrentChange","page-size","page-sizes","current-page","total"])])])),[[N,t.isLoading]])])]),e(L,{show:t.showDialog,onClosed:r.closeDialog,title:t.dialog.dialogTitle,data:t.dialog.dialogData,categories:u.categories},null,8,["show","onClosed","title","data","categories"])]),_:1})],64)}const ct=J(Z,[["render",ce]]);export{ct as default};
