import{A as B}from"./AuthenticatedLayout-BfaRtpdp.js";import{F as h}from"./@inertiajs-NuU9yPsb.js";import{d as F}from"./lodash.debounce-BuEyZVTI.js";import R from"./Dialog-BuaMp_61.js";import V from"./ChangePassword-BqQv6Xr_.js";import{B as O,Q as J,R as j,S as M,T as H,P as U,U as W}from"./@element-plus-BF6V2acP.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as Q,a as C}from"./element-plus-CGHro3gb.js";import{e as X,w as Y,a1 as q,ak as t,ar as G,c as D,Y as o,S as a,F as K,o as k,a as s,T as Z,W as $,X as ee}from"./@vue-CiBlh0uF.js";import"./moment-C5S46NFB.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bgg5YRNC.js";import"./side-channel-CbjMffun.js";import"./object-inspect-8Tg_cmh0.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./InputError-D_RmDawB.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-D_65hJm2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DnZiAhhr.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const oe={props:["staffs","roles"],components:{AuthenticatedLayout:B,Dialog:R,Plus:O,Edit:J,Refresh:j,Filter:M,Checked:H,Delete:U,Lock:W,ChangePassword:V},setup(){const e=X({showDialog:!1,isLoading:!1,dialog:{dialogTitle:"",dialogData:{}},pageList:[10,20,60,80,100],param:{page:1,page_size:10,search:""},showChangePassword:!1}),u=n=>{e.param.page_size=n,p()},c=n=>{e.param.page=n,p()},l=()=>{e.dialog.dialogTitle="Create",e.dialog.dialogData={},e.showDialog=!0},w=n=>{e.showChangePassword=!0,e.dialog.dialogTitle="Change Password",e.dialog.dialogData=JSON.parse(JSON.stringify(n))},b=n=>{e.dialog.dialogTitle="Edit",e.dialog.dialogData=JSON.parse(JSON.stringify(n)),e.showDialog=!0},f=n=>{Q.confirm("Are you sure you want to delete?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",draggable:!0,closeOnClickModal:!1}).then(()=>{h.delete(route("admin.staffs.destroy",n),{onSuccess:m=>{C.success(m.props.flash.success)},onError:m=>{C.error(m.error)}})}).catch(()=>{C({type:"info",message:"Cancel"})})};Y(()=>e.param.search,F(()=>{p()},500));const p=()=>{e.isLoading=!0,h.get("/admin/staffs",e.param,{preserveScroll:!0,preserveState:!0,replace:!0,onFinish:()=>{e.isLoading=!1}})},r=()=>{e.showDialog=!1,e.showChangePassword=!1},d=()=>{h.get(route("admin.staffs.index"))};return{...q(e),addNew:l,handleEdit:b,handleDelete:f,onSizeChange:u,onCurrentChange:c,closeDialog:r,reset:d,handleChangePassword:w}}},te={class:"p-4 container mx-auto overflow-x-auto"},ae=s("h4",{class:"text-lg font-bold mb-3 ml-1"},"Staffs",-1),le={class:"bg-white p-4 rounded shadow-sm border border-gray-200"},ne={class:"flex items-center justify-between gap-4 xl:gap-0 mt-2 mb-5"},se={class:"flex items-center gap-3"},ie=s("span",null,"New",-1),re={"element-loading-text":"Loading...","element-loading-background":"rgba(229, 231, 235, 0.7)"},de={class:"font-semibold flex items-center gap-2"},ce={class:"my-5 flex items-center justify-center"};function pe(e,u,c,l,w,b){const f=t("Head"),p=t("Plus"),r=t("el-icon"),d=t("el-button"),n=t("el-input"),m=t("Refresh"),v=t("el-avatar"),g=t("el-table-column"),S=t("Lock"),_=t("el-tooltip"),x=t("Edit"),P=t("Delete"),L=t("el-table"),z=t("el-pagination"),E=t("Dialog"),N=t("ChangePassword"),T=t("AuthenticatedLayout"),A=G("loading");return k(),D(K,null,[o(f,{title:"Staffs"}),o(T,null,{default:a(()=>[s("div",te,[ae,s("div",le,[s("div",ne,[s("div",se,[o(d,{type:"primary",onClick:l.addNew},{default:a(()=>[o(r,null,{default:a(()=>[o(p)]),_:1}),ie]),_:1},8,["onClick"])]),s("div",null,[o(n,{modelValue:e.param.search,"onUpdate:modelValue":u[0]||(u[0]=i=>e.param.search=i),style:{width:"200px"},placeholder:"Search Staffs"},null,8,["modelValue"]),o(d,{type:"danger",onClick:l.reset,class:"ml-3"},{default:a(()=>[o(r,null,{default:a(()=>[o(m)]),_:1})]),_:1},8,["onClick"])])]),Z((k(),D("div",re,[o(L,{data:c.staffs.data,"table-layout":"fixed","default-sort":{prop:"id",order:"descending"}},{default:a(()=>[o(g,{label:"Name",sortable:""},{default:a(i=>[s("h5",de,[o(v,{src:i.row.profile,size:30},null,8,["src"]),$(" "+ee(i.row.name),1)])]),_:1}),o(g,{prop:"email",label:"Email"}),o(g,{prop:"role",label:"Role"}),o(g,{prop:"phone",label:"Phone"}),o(g,{label:"Actions"},{default:a(i=>[o(_,{class:"box-item",content:"Change Password",placement:"top"},{default:a(()=>[o(d,{circle:"",style:{"margin-bottom":"5px"},onClick:y=>l.handleChangePassword(i.row)},{default:a(()=>[o(r,null,{default:a(()=>[o(S)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),o(_,{class:"box-item",content:"Edit",placement:"top"},{default:a(()=>[o(d,{type:"warning",circle:"",style:{"margin-bottom":"5px"},onClick:y=>l.handleEdit(i.row)},{default:a(()=>[o(r,null,{default:a(()=>[o(x)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),o(_,{class:"box-item",content:"Delete",placement:"top"},{default:a(()=>[o(d,{type:"danger",circle:"",style:{"margin-bottom":"5px"},onClick:y=>l.handleDelete(i.row.id)},{default:a(()=>[o(r,null,{default:a(()=>[o(P)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),s("div",ce,[o(z,{onSizeChange:l.onSizeChange,onCurrentChange:l.onCurrentChange,"page-size":e.param.page_size,background:!0,"page-sizes":e.pageList,"current-page":e.param.page,layout:"total,sizes,prev,pager,next,jumper",total:c.staffs.total},null,8,["onSizeChange","onCurrentChange","page-size","page-sizes","current-page","total"])])])),[[A,e.isLoading]])])]),o(E,{show:e.showDialog,onClosed:l.closeDialog,title:e.dialog.dialogTitle,data:e.dialog.dialogData,roles:c.roles},null,8,["show","onClosed","title","data","roles"]),o(N,{show:e.showChangePassword,onClosed:l.closeDialog,title:e.dialog.dialogTitle,data:e.dialog.dialogData},null,8,["show","onClosed","title","data"])]),_:1})],64)}const Ze=I(oe,[["render",pe]]);export{Ze as default};
